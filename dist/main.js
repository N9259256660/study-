(()=>{"use strict";window.addEventListener("DOMContentLoaded",(()=>{!function(){const e=document.querySelectorAll(".tabheader__item"),t=document.querySelectorAll(".tabcontent"),o=document.querySelector(".tabheader__items");function a(){t.forEach((e=>{e.classList.add("hide"),e.classList.remove("show","fade")})),e.forEach((e=>{e.classList.remove("tabheader__item_active")}))}function n(o){t[o].classList.add("show","fade"),t[o].classList.remove("hide"),e[o].classList.add("tabheader__item_active")}o.querySelectorAll("div"),a(),n(0),o.addEventListener("click",(t=>{t.target&&t.target.classList.contains("tabheader__item")&&e.forEach(((e,o)=>{t.target==e&&(a(),n(o))}))}))}(),function(){const e=setInterval((function(){const o=Date.parse("2023-02-28T23:59:59")-Date.parse(new Date),a=[Math.floor(o/864e5),Math.floor(o%864e5/36e5),Math.floor(o%36e5/6e4),Math.floor(o%6e4/1e3)];[document.getElementById("days"),document.getElementById("hours"),document.getElementById("minutes"),document.getElementById("seconds")].forEach(((e,o)=>{e.innerHTML=t(a[o])})),0===o&&clearInterval(e)}),1e3);function t(e){return e<10&&(e=`0${e}`),e}!function(){const e=[8,11,20,19,29,7,12,23,16],o=e.reduce(((e,t)=>e+t)),a=[e.length,Math.floor(o/60),Math.floor(o%60)];[document.getElementById("lesson"),document.getElementById("hours-lesson"),document.getElementById("minutes-lesson")].forEach(((e,o)=>{e.innerHTML=t(a[o])}))}()}(),function(){const e=document.querySelectorAll("[date-modalUp]"),t=(document.querySelector(".modal__close"),document.querySelector(".modal"));function o(){t.style.display="block",document.body.style.overflow="hidden"}function a(){t.style.display="none",document.body.style.overflow=""}e.forEach((e=>{e.addEventListener("click",(()=>{o()}))})),t.addEventListener("click",(e=>{e.target===t&&a()})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&a()}));class n{constructor(e,t,o,a,n,s="руб",c=64,i="[data-container]",...l){this.src=e,this.alt=t,this.title=o,this.descr=a,this.price=n,this.currency=s,this.course=c,this.parent=document.querySelector(i),this.restClasses=l,this.changeToRub()}changeToRub(){this.price=this.price*this.course}render(){const e=document.createElement("div");this.restClasses.forEach((t=>{e.classList.add(t)})),e.innerHTML=`\n      <div class="menu__item">\n        <img src=${this.src} alt=${this.alt}/>\n        <h3 class="menu__item-subtitle">${this.title}</h3>\n        <div class="menu__item-descr">${this.descr}</div>\n        <div class="menu__item-price">\n          <div class="menu__item-cost">Цена:</div>\n          <div class="menu__item-total"><span>${this.price}</span>${this.currency}/день</div>\n        </div>\n      </div>\n    `,this.parent.append(e)}}const s=document.querySelectorAll("form"),c=document.createElement("div"),i=document.querySelector(".modal__dialog"),l="Идет загрузка",r="Спасибо, скоро мы с вами свяжемся",d="Что-то пошло не так",u='<img class="spinner_s" src="icons/spinner.svg"/>';s.forEach((e=>{var t;(t=e).addEventListener("submit",(e=>{e.preventDefault(),h(l,u);const o=new FormData(t),a={};o.forEach(((e,t)=>{a[t]=e})),m("http://localhost:3000/requests",JSON.stringify(a)).then((()=>{h(r)})).catch((()=>{h(d)})).finally((()=>{s.forEach((e=>{e.reset()}))}))}))}));const m=async(e,t)=>{const o=await fetch(e,{method:"POST",body:t,headers:{"Content-type":"application/json"}});return await o.json()};function h(e,n=" "){i.classList.add("hide"),o(),c.classList.add("modal__dialog"),c.innerHTML=`\n    <div class="modal__content">\n    <div data-close class="modal__close">&times;</div>\n    <div class="modal__title">${e}</div>\n    <div >${n}</div>   \n    </div>     \n    `,t.append(c),setTimeout((()=>{c.remove(),i.classList.add("show"),i.classList.remove("hide"),a()}),3e3)}document.addEventListener("click",(e=>{""==e.target.getAttribute("data-close")&&a()})),axios.get("http://localhost:3000/menu").then((e=>{e.data.forEach((({img:e,altimg:t,title:o,descr:a,price:s})=>{new n(e,t,o,a,s).render()}))}))}(),function(){let e=1,t=0;const o=document.querySelectorAll(".offer__slide"),a=document.querySelector(".offer__slider-next"),n=document.querySelector(".offer__slider-prev"),s=document.getElementById("total"),c=document.getElementById("current"),i=document.querySelector(".offer__slider-inner"),l=document.querySelector(".offer__slider-wrapper"),r=window.getComputedStyle(l).width,d=document.querySelector(".offer__slider"),u=document.createElement("ol"),m=+r.match(/\d\d\d/gi).shift();d.style.position="relative",i.style.width=100*o.length+"%",i.style.display="flex",i.style.transition="0.5s all",l.style.overflow="hidden",o.forEach((e=>{e.style.width=r})),u.classList.add("carousel-indicators");for(let e=0;e<o.length;e++){const t=document.createElement("li");t.setAttribute("data-slide-to",e+1),t.classList.add("dot"),u.append(t)}d.append(u);const h=document.querySelectorAll(".dot");function g(){h.forEach((e=>{e.style.opacity=.3})),h[e-1].style.opacity=1}function _(e,t){e.textContent=t<10?`0${t}`:t}g(),a.addEventListener("click",(()=>{t==m*(o.length-1)?t=0:t+=m,i.style.transform=`translateX(-${t}px)`,e++,e>o.length&&(e=1),g(),_(c,e)})),n.addEventListener("click",(()=>{0==t?t=m*(o.length-1):t-=m,i.style.transform=`translateX(-${t}px)`,e--,e<1&&(e=o.length),g(),_(c,e)})),_(s,o.length),_(c,e),h.forEach((o=>{o.addEventListener("click",(o=>{const a=o.target.getAttribute("data-slide-to");e=a,t=m*(a-1),i.style.transform=`translateX(-${t}px)`,g(),_(c,e)}))}))}(),function(){let e,t,o,a="female",n=1.375;const s=document.querySelector(".calculating__result span");function c(e,t){document.querySelectorAll(e).forEach((e=>{e.classList.remove(t),e.getAttribute("id")===localStorage.getItem("sex")&&e.classList.add(t),e.getAttribute("data-ratio")===localStorage.getItem("ratio")&&e.classList.add(t)}))}function i(){s.textContent=a&&e&&t&&o&&n?"female"===a?Math.round((6+2*t+3.1*e-4.3*o)*n):Math.round((36+13.4*t+4.8*e-5.7*o)*n):"_____"}function l(e,t){const o=document.querySelectorAll(e);o.forEach((e=>{e.addEventListener("click",(e=>{e.target.getAttribute("data-ratio")?n=+e.target.getAttribute("data-ratio"):a=e.target.getAttribute("id"),console.log(n,a),localStorage.setItem("sex",a),localStorage.setItem("ratio",n),o.forEach((e=>{e.classList.remove(t)})),e.target.classList.add(t),i()}))}))}function r(a){const n=document.querySelector(a);n.addEventListener("input",(()=>{switch(n.value.match(/\D/g)?n.style.border="2px solid red":n.style.border="none",n.getAttribute("id")){case"height":e=+n.value;break;case"weight":t=+n.value;break;case"age":o=+n.value}i()}))}localStorage.getItem("sex")?a=localStorage.getItem("sex"):localStorage.setItem("sex",a),localStorage.getItem("ratio")?n=localStorage.getItem("ratio"):localStorage.setItem("ratio",n),c("#gender div","calculating__choose-item_active"),c(".calculating__choose_big div","calculating__choose-item_active"),i(),l("#gender div","calculating__choose-item_active"),l(".calculating__choose_big div","calculating__choose-item_active"),r("#height"),r("#weight"),r("#age")}()}))})();